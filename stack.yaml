resolver: lts-14.25

packages:
- lib/core
- lib/core-integration
- lib/cli
- lib/launcher
- lib/text-class
- lib/test-utils
- lib/jormungandr
- lib/byron

extra-deps:
# Miscellaneous
- base58-bytestring-0.1.0
- bech32-1.0.2
- bech32-th-1.0.2
- OddWord-1.0.2.0
- command-0.1.1
- wai-extra-3.0.29.1
- Win32-2.6.2.0

# Needed because network > 3.1 is needed for cardano-wallet-byron
- servant-0.17
- servant-server-0.17
- servant-client-core-0.17
- servant-client-0.17
- servant-swagger-1.1.8

# 'zip' with an extra flag to disable bzlib2 library
- zip-1.3.0

# persistent-2.10.2 with CASCADE DELETE support for SQLite.
#
# See: https://github.com/input-output-hk/persistent/tree/cardano-wallet
- git: https://github.com/input-output-hk/persistent
  commit: 107787ecc4c8a112375493cd66574f788f950fce
  subdirs:
    - persistent
    - persistent-sqlite
    - persistent-template

# cardano-crypto
- git: https://github.com/input-output-hk/cardano-crypto
  commit: 05aa1bc640c42bfca787531d12595489c1fa3b82

# iohk-monitoring-framework
- git: https://github.com/input-output-hk/iohk-monitoring-framework
  commit: 10877fbae54aa7a4c04ae3b5d87c825a4019e9e9
  subdirs:
    - contra-tracer
    - iohk-monitoring
    - plugins/backend-aggregation
    - plugins/backend-monitoring
    - tracer-transformers

# dependencies of iohk-monitoring-framework
- git: https://github.com/CodiePP/ekg-prometheus-adapter
  commit: 1a258b6df7d9807d4c4ff3e99722223d31a2c320
- prometheus-2.1.2
- time-units-1.0.0
- libsystemd-journal-1.4.4
- katip-0.8.3.0

# dependencies for cardano-wallet-byron
- streaming-binary-0.3.0.1
- generic-monoid-0.1.0.0
- canonical-json-0.6.0.0
- statistics-linreg-0.3
- network-3.1.0.1
- connection-0.3.1
- Unique-0.4.7.6
- moo-1.2
- gray-code-0.3.1

- git: https://github.com/well-typed/cborg
  commit: 42a83192749774268337258f4f94c97584b80ca6
  subdirs:
    - cborg

- git: https://github.com/input-output-hk/cardano-base
  commit: 1222078176fe74d5ce17f2a8343c6588233a49a3
  subdirs:
    - binary
    - binary/test
    - cardano-crypto-class
    - slotting

- git: https://github.com/input-output-hk/cardano-ledger
  commit: 512c26a66a6a63278846646b81bf8eadcd4ae99c
  subdirs:
    - cardano-ledger
    - cardano-ledger/test
    - crypto
    - crypto/test

- git: https://github.com/input-output-hk/cardano-ledger-specs
  commit: 156086266486da710c5037c11f83d2112434926f
  subdirs:
    - byron/semantics/executable-spec # small-steps
    - byron/ledger/executable-spec    # cs-ledger
    - byron/chain/executable-spec     # cs-blockchain

- git: https://github.com/input-output-hk/goblins
  commit: 26d35ad52fe9ade3391532dbfeb2f416f07650bc

- git: https://github.com/input-output-hk/cardano-prelude
  commit: 3ac22a2fda11ca7131a011a9ea48fcbfdc26d6b3
  subdirs:
    - .
    - test

- git: https://github.com/input-output-hk/ouroboros-network
  commit: 7e89518148ebb11d9ee6b973c394a69713961de6
  subdirs:
    - io-sim
    - io-sim-classes
    - network-mux
    - ntp-client
    - ouroboros-consensus
    - ouroboros-consensus-byron
    - ouroboros-network
    - ouroboros-network-framework
    - ouroboros-network-testing
    - typed-protocols
    - typed-protocols-examples
    - Win32-network

flags:
  # Avoid a system library which causes difficulty with cross-compilation
  zip:
    disable-bzip2: true

# Generate files required by Weeder.
# See https://github.com/ndmitchell/weeder/issues/53
ghc-options: {"$locals": -ddump-to-file -ddump-hi}

nix:
  shell-file: nix/stack-shell.nix
